<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á≠ãËÇâ„Çø„Ç§„Éî„É≥„Ç∞ - Touch Typing Game</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Hiragino Kaku Gothic Pro', '„Éí„É©„ÇÆ„ÉéËßí„Ç¥ Pro W3', 'Meiryo', '„É°„Ç§„É™„Ç™', sans-serif;
            background: linear-gradient(135deg, #ffeef8, #e8f5ff, #fff0e8);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        h1 {
            color: #ff6b9d;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .stat-box {
            background: linear-gradient(45deg, #ffc3d7, #c3e8ff);
            padding: 15px 20px;
            border-radius: 15px;
            margin: 5px;
            min-width: 120px;
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #4a4a4a;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .word-display {
            background: linear-gradient(45deg, #ffe8f5, #e8f0ff);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            font-size: 2.5em;
            font-weight: bold;
            color: #333;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            letter-spacing: 2px;
        }

        .romaji-display {
            font-size: 1.2em;
            color: #888;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }

        .input-area {
            margin: 20px 0;
        }

        #typing-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.5em;
            border: 3px solid #ffc3d7;
            border-radius: 15px;
            outline: none;
            text-align: center;
            background: linear-gradient(45deg, #fff8fc, #f8fcff);
            font-family: 'Courier New', monospace;
        }

        #typing-input:focus {
            border-color: #ff6b9d;
            box-shadow: 0 0 20px rgba(255, 107, 157, 0.3);
        }

        .correct {
            color: #4CAF50;
        }

        .incorrect {
            color: #f44336;
        }

        .buttons {
            margin: 20px 0;
        }

        button {
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .start-button {
            background: linear-gradient(45deg, #ff6b9d, #ffa8cc);
            color: white;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
        }

        .reset-button {
            background: linear-gradient(45deg, #66b3ff, #99ccff);
            color: white;
        }

        .reset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 179, 255, 0.4);
        }

        .game-over {
            background: linear-gradient(45deg, #ffeb3b, #fff176);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            background: linear-gradient(45deg, #ff6b9d, #ffa8cc);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .word-display {
                font-size: 2em;
                padding: 20px;
            }
            
            .game-stats {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üí™ Á≠ãËÇâ„Çø„Ç§„Éî„É≥„Ç∞ üí™</h1>
        
        <div class="game-stats">
            <div class="stat-box">
                <div class="stat-number" id="timer">60</div>
                <div class="stat-label">ÊÆã„ÇäÊôÇÈñì(Áßí)</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="score">0</div>
                <div class="stat-label">„Çπ„Ç≥„Ç¢</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="accuracy">100</div>
                <div class="stat-label">Ê≠£Á¢∫Áéá(%)</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="word-display" id="word-display">
            <div>
                <div class="romaji-display" id="romaji-display">„Å©„Çå„Åß„ÇÇ„Ç≠„Éº„Çí„Çø„ÉÉ„ÉÅ„Åô„Çã„Å®Âßã„Åæ„Çä„Åæ„Åô</div>
                <div>Á≠ãËÇâ„Çø„Ç§„Éî„É≥„Ç∞„Ç≤„Éº„É†</div>
            </div>
        </div>

        <div class="input-area">
            <input type="text" id="typing-input" placeholder="„Åì„Åì„Å´„É≠„Éº„ÉûÂ≠ó„ÇíÂÖ•Âäõ...">
        </div>

        <div class="buttons">
            <button class="reset-button" id="reset-button">„É™„Çª„ÉÉ„Éà</button>
        </div>

        <div class="game-over" id="game-over">
            <h2>„Ç≤„Éº„É†ÁµÇ‰∫ÜÔºÅ</h2>
            <p id="final-score">„ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åó„ÅüÔºÅ</p>
        </div>
    </div>

    <script>
        class TypingGame {
            constructor() {
                this.words = [
                    { japanese: 'Â§ßËÉ∏Á≠ã', romaji: 'daiokyoukin' },
                    { japanese: '‰∏âËßíÁ≠ã', romaji: 'sankakukin' },
                    { japanese: '‰∏äËÖï‰∫åÈ†≠Á≠ã', romaji: 'jouwannitoukin' },
                    { japanese: '‰∏äËÖï‰∏âÈ†≠Á≠ã', romaji: 'jouwansantoukin' },
                    { japanese: 'ÂâçËÖïÁ≠ã', romaji: 'zenwaankin' },
                    { japanese: 'ËÖπÁõ¥Á≠ã', romaji: 'fukuchokukin' },
                    { japanese: 'ËÖπÊñúÁ≠ã', romaji: 'fukushakin' },
                    { japanese: 'Â§ßËÖøÂõõÈ†≠Á≠ã', romaji: 'daitaishitoukin' },
                    { japanese: '„Éè„É†„Çπ„Éà„É™„É≥„Ç∞', romaji: 'hamusutoringu' },
                    { japanese: 'Â§ßÊÆøÁ≠ã', romaji: 'daidenkin' },
                    { japanese: 'Â∫ÉËÉåÁ≠ã', romaji: 'kouhaikin' },
                    { japanese: 'ÂÉßÂ∏ΩÁ≠ã', romaji: 'soucapkin' },
                    { japanese: 'ËÑäÊü±Ëµ∑Á´ãÁ≠ã', romaji: 'sekichukkiritsukin' },
                    { japanese: '„Åµ„Åè„Çâ„ÅØ„Åé', romaji: 'fukurahagi' },
                    { japanese: 'ÂâçËÑõÈ™®Á≠ã', romaji: 'zenkokotsukin' },
                    { japanese: 'Ê£ò‰∏äÁ≠ã', romaji: 'kyokujoukin' },
                    { japanese: 'Ê£ò‰∏ãÁ≠ã', romaji: 'kyokutakin' },
                    { japanese: 'Â∞èÂÜÜÁ≠ã', romaji: 'shouenkin' },
                    { japanese: 'ËÇ©Áî≤‰∏ãÁ≠ã', romaji: 'kenkokakin' },
                    { japanese: 'ËÖ∏ËÖ∞Á≠ã', romaji: 'chouyoukin' }
                ];
                
                this.currentWordIndex = 0;
                this.score = 0;
                this.timeLeft = 60;
                this.isGameActive = false;
                this.typedCharacters = 0;
                this.correctCharacters = 0;
                this.gameTimer = null;
                this.currentInput = '';
                
                this.initializeElements();
                this.setupEventListeners();
            }

            initializeElements() {
                this.wordDisplay = document.getElementById('word-display');
                this.romajiDisplay = document.getElementById('romaji-display');
                this.typingInput = document.getElementById('typing-input');
                this.timerDisplay = document.getElementById('timer');
                this.scoreDisplay = document.getElementById('score');
                this.wpmDisplay = document.getElementById('wpm');
                this.accuracyDisplay = document.getElementById('accuracy');
                this.resetButton = document.getElementById('reset-button');
                this.gameOverDiv = document.getElementById('game-over');
                this.finalScoreP = document.getElementById('final-score');
                this.progressBar = document.getElementById('progress');
            }

            setupEventListeners() {
                this.resetButton.addEventListener('click', () => this.resetGame());
                this.typingInput.addEventListener('input', (e) => this.handleInput(e));
                this.typingInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && this.isGameActive) {
                        this.checkWord();
                    } else if (!this.isGameActive && e.key.length === 1) {
                        this.startGame();
                    }
                });
                this.typingInput.addEventListener('focus', () => {
                    if (!this.isGameActive) {
                        this.startGame();
                    }
                });
                // ‰ªªÊÑè„ÅÆ„Ç≠„ÉºÂÖ•Âäõ„Åß„Ç≤„Éº„É†ÈñãÂßã
                document.addEventListener('keydown', (e) => {
                    if (!this.isGameActive && e.key.length === 1) {
                        this.startGame();
                        this.typingInput.focus();
                    }
                });
            }

            startGame() {
                this.isGameActive = true;
                this.typingInput.disabled = false;
                this.typingInput.focus();
                this.gameOverDiv.style.display = 'none';
                
                this.shuffleWords();
                this.displayCurrentWord();
                this.startTimer();
            }

            shuffleWords() {
                for (let i = this.words.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.words[i], this.words[j]] = [this.words[j], this.words[i]];
                }
            }

            displayCurrentWord() {
                if (this.currentWordIndex < this.words.length) {
                    const currentWord = this.words[this.currentWordIndex];
                    this.wordDisplay.innerHTML = `
                        <div>
                            <div class="romaji-display">${currentWord.romaji}</div>
                            <div>${currentWord.japanese}</div>
                        </div>
                    `;
                } else {
                    this.currentWordIndex = 0;
                    this.shuffleWords();
                    this.displayCurrentWord();
                }
            }

            handleInput(e) {
                if (!this.isGameActive) return;
                
                this.currentInput = e.target.value.toLowerCase();
                this.typedCharacters++;
                
                const currentWord = this.words[this.currentWordIndex];
                const targetRomaji = currentWord.romaji.toLowerCase();
                
                // „É™„Ç¢„É´„Çø„Ç§„É†„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ
                if (targetRomaji.startsWith(this.currentInput)) {
                    this.typingInput.className = 'correct';
                    if (this.currentInput === targetRomaji) {
                        this.correctWord();
                    }
                } else {
                    this.typingInput.className = 'incorrect';
                }
            }

            correctWord() {
                this.score += 10;
                this.correctCharacters += this.currentInput.length;
                this.typingInput.value = '';
                this.currentInput = '';
                this.typingInput.className = '';
                this.currentWordIndex++;
                this.displayCurrentWord();
                this.updateStats();
            }

            checkWord() {
                const currentWord = this.words[this.currentWordIndex];
                if (this.currentInput === currentWord.romaji.toLowerCase()) {
                    this.correctWord();
                }
            }

            startTimer() {
                this.gameTimer = setInterval(() => {
                    this.timeLeft--;
                    this.timerDisplay.textContent = this.timeLeft;
                    
                    // „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„ÅÆÊõ¥Êñ∞
                    const progress = ((60 - this.timeLeft) / 60) * 100;
                    this.progressBar.style.width = progress + '%';
                    
                    if (this.timeLeft <= 0) {
                        this.endGame();
                    }
                    
                    this.updateStats();
                }, 1000);
            }

            updateStats() {
                this.scoreDisplay.textContent = this.score;
                
                // WPMË®àÁÆó (1ÂàÜÈñì„ÅÇ„Åü„Çä„ÅÆÂçòË™ûÊï∞)
                const timeElapsed = (60 - this.timeLeft) / 60;
                const wpm = timeElapsed > 0 ? Math.round((this.score / 10) / timeElapsed) : 0;
                this.wpmDisplay.textContent = wpm;
                
                // Ê≠£Á¢∫ÁéáË®àÁÆó
                const accuracy = this.typedCharacters > 0 ? 
                    Math.round((this.correctCharacters / this.typedCharacters) * 100) : 100;
                this.accuracyDisplay.textContent = accuracy;
            }

            endGame() {
                this.isGameActive = false;
                clearInterval(this.gameTimer);
                this.typingInput.disabled = true;
                
                const wpm = Math.round((this.score / 10) / 1);
                const accuracy = this.typedCharacters > 0 ? 
                    Math.round((this.correctCharacters / this.typedCharacters) * 100) : 100;
                
                this.finalScoreP.innerHTML = `
                    ÊúÄÁµÇ„Çπ„Ç≥„Ç¢: ${this.score}ÁÇπ<br>
                    WPM: ${wpm}<br>
                    Ê≠£Á¢∫Áéá: ${accuracy}%<br>
                    „Çà„ÅèÈ†ëÂºµ„Çä„Åæ„Åó„ÅüÔºÅüí™
                `;
                
                this.gameOverDiv.style.display = 'block';
            }

            resetGame() {
                this.isGameActive = false;
                clearInterval(this.gameTimer);
                
                this.currentWordIndex = 0;
                this.score = 0;
                this.timeLeft = 60;
                this.typedCharacters = 0;
                this.correctCharacters = 0;
                this.currentInput = '';
                
                this.typingInput.value = '';
                this.typingInput.disabled = false;
                this.typingInput.className = '';
                this.gameOverDiv.style.display = 'none';
                this.progressBar.style.width = '0%';
                
                this.wordDisplay.innerHTML = `
                    <div>
                        <div class="romaji-display">„Å©„Çå„Åß„ÇÇ„Ç≠„Éº„Çí„Çø„ÉÉ„ÉÅ„Åô„Çã„Å®Âßã„Åæ„Çä„Åæ„Åô</div>
                        <div>Á≠ãËÇâ„Çø„Ç§„Éî„É≥„Ç∞„Ç≤„Éº„É†</div>
                    </div>
                `;
                
                this.timerDisplay.textContent = '60';
                this.scoreDisplay.textContent = '0';
                this.wpmDisplay.textContent = '0';
                this.accuracyDisplay.textContent = '100';
            }
        }

        // „Ç≤„Éº„É†ÂàùÊúüÂåñ
        window.addEventListener('DOMContentLoaded', () => {
            new TypingGame();
        });
    </script>
</body>
</html>